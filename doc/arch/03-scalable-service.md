### 一、 如何设计一款永不重复的高性能分布式发号器

#### 架构设计与核心要点

- 全局唯一
- 粗略有序
- 可反解
- 可制造
- 高性能
- 高可用
- 可伸缩

### 二、可灵活扩展的消息队列框架的设计与实现

### 三、轻量级的数据库分库分表架构与框架

#### 什么是分库分表

数据量不断增加，该怎样存储这些海量的交易数据呢，数据拆分是这些问题的主流解决方案

- 垂直拆分：根据业务的维度，将原本的一个库（表）拆分为多个库（表），每个库（表）与原有的结构不同
- 水平拆分：根据分片（sharding）算法，将一个库（表）拆分为多个库（表），依旧保留原有的结构。

从单库单表->单库多表->多库多表

如果在MySQL的数据量达到千万级别，就需要考虑进行分表

##### 客户端分片

###### 三种分而治之的解决方案

###### 1、应用层实现

直接在应用层中读取分片规则，然后解析分片规则，根据分片规则实现切分的路由逻辑。这种方案虽然侵入了业务，但是实现简单，适合快速上线。切片逻辑都有自己开发，出现问题容易排查。但是这种方式数据库保持的连接较多，需要注意容量的规划和评估。

###### 2、通过jdbc协议实现

通过定制jdbc实现，针对业务逻辑提供与jdbc一致的接口，让开发人员不必关系分库分表的实现，对业务层保持透明。

流行的客户端分库分表框架shardingjdbc便采用了这种方案

###### 3、通过定制orm框架实现

很多公司通过在mybatis配置文件的sql中增加表索引的参数来实现。



##### 代理分片

在应用层和数据库之间增加一个代理层，把分片的路由规则配置在代理层，代理层对外提供jdbc兼容的接口给应用层，应用层开发完毕，在代理层配置路由规则即可。

改方案的框架又cobar和mycat等

##### 支持事务的分布式数据库

OceanBase、TiDB

#### 分库分表的架构设计

##### 垂直拆分

优点

- 拆分后业务清晰，拆分规则明确
- 系统之间进行整合或扩展很容易
- 按照成本、应用的等级、应用类型等将表放在不同机器上，便于管理
- 便于实现动静分离、冷热分离的数据库表的设计模式

缺点

- 部分业务表无法join
- 受业务的不同限制，存在单库性能上线
- 事务处理复杂

##### 水平拆分

优点

- 单库单表的数据保持在一定量级，有助于性能的提高
- 切分的表结构相投，应用层改造较少，只要添加路由规则即可
- 提高了系统的稳定性和负载能力

缺点

- 存在分布式事务问题
- 存在跨节点join的问题
- 存在跨节点合并排序、合并的问题
- 存在多数据源管理的问题

##### 主流分布式事务解决方案

- 两阶段提交协议
- 最大努力保证模式
- 事务补偿机制



### 四、缓存的本质和缓存使用的优秀实践

各个部件速度差异，此处假设cpu主频为2.6G，每秒执行2.6*10^9个指令

| 存储   | 大小 | cpu  | 周期 |      |
| ------ | ---- | ---- | ---- | ---- |
| 寄存器 |      |      |      |      |
| L1     |      |      |      |      |
| L2     |      |      |      |      |
| L3     |      |      |      |      |
| 内存   |      |      |      |      |



#### 常用分布式缓存解决方案

redis

memcached

tair



### 五、大数据利器之ElasticSearch

### 六、全面揭秘分布式定时任务

### 七、RPC服务的发展历程和对比分析

### 八、Dubbo实战与源码分析

### 九、高性能网络中间件